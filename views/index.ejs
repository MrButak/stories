<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../views/partials/head.ejs'); %>
</head>

<body>

    <h1>I'm the stories app</h1>
    <p>Current user: <%= currentUserName %></p>
    <a href="/logout">Logout</a>

    <!-- This loops through the stories array, displaying each title and the first 5 
        paragraphs, and a hidden field with the story id -->

        <!--console.log(allStories[0]['paragraphs'][1]['content'])-->
    <div class="storyTitlesWrapper">
        <% stories.forEach(function(story) { %>
            <div id="storyTitles">
                <form method="post" action="/story">
                    <h2> <%= story['title'] %></h2>
                    <input type="submit" value="view / add to story">
                    <input name = "storyId" type="hidden" value="<%= story['id'] %>">
                </form>
                <% story['paragraphs'].forEach(function(para) { %>
                <text> <%= para['content'] %></text>
                <% }); %>
            </div>
        <% }); %>  
    </div>
        
    <form action="/addstory" method="post">        
        <textarea cols="60", maxlength="70" name="addStoryInput", rows="4", placeholder="Enter the title of your story", title="Maximum length 70 characters", required></textarea>
        <br>
        <input type="submit" value="Start a new story">
    </form>

</body>
</html>
